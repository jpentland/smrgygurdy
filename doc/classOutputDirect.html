<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>SMRGygurdy: OutputDirect Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SMRGygurdy
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classOutputDirect-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">OutputDirect Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Contains the connection to alsa, with a method to write directly to the PCM.  
 <a href="classOutputDirect.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="OutputDirect_8h_source.html">OutputDirect.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for OutputDirect:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classOutputDirect.png" usemap="#OutputDirect_map" alt=""/>
  <map id="OutputDirect_map" name="OutputDirect_map">
<area href="classOutputSink.html" title="Adaptor for ALSA audio output. " alt="OutputSink" shape="rect" coords="0,0,83,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOutputDirect_1_1UnableToOpenPCMException.html">UnableToOpenPCMException</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thrown when pcm could not be opened.  <a href="classOutputDirect_1_1UnableToOpenPCMException.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad44c1cd0c0ed4855aadafa551101e573"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOutputDirect.html#ad44c1cd0c0ed4855aadafa551101e573">OutputDirect</a> (std::string pcmName, unsigned int periodSize, unsigned int sampleRate)</td></tr>
<tr class="memdesc:ad44c1cd0c0ed4855aadafa551101e573"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create new <a class="el" href="classOutputDirect.html" title="Contains the connection to alsa, with a method to write directly to the PCM. ">OutputDirect</a> and prepare it for incoming data.  <a href="#ad44c1cd0c0ed4855aadafa551101e573">More...</a><br /></td></tr>
<tr class="separator:ad44c1cd0c0ed4855aadafa551101e573"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78490903e52086608b663243f53296ae"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a78490903e52086608b663243f53296ae"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOutputDirect.html#a78490903e52086608b663243f53296ae">~OutputDirect</a> ()</td></tr>
<tr class="memdesc:a78490903e52086608b663243f53296ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:a78490903e52086608b663243f53296ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4d85fd02c2352113fe8ea24638c3e81"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOutputDirect.html#ac4d85fd02c2352113fe8ea24638c3e81">writeSamples</a> (short buffer[], int length)</td></tr>
<tr class="memdesc:ac4d85fd02c2352113fe8ea24638c3e81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write some samples to the output.  <a href="#ac4d85fd02c2352113fe8ea24638c3e81">More...</a><br /></td></tr>
<tr class="separator:ac4d85fd02c2352113fe8ea24638c3e81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8270ce2bb8fe703239faec3b695451b6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8270ce2bb8fe703239faec3b695451b6"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOutputDirect.html#a8270ce2bb8fe703239faec3b695451b6">close</a> ()</td></tr>
<tr class="memdesc:a8270ce2bb8fe703239faec3b695451b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the audio system, will wait for sound to finish. <br /></td></tr>
<tr class="separator:a8270ce2bb8fe703239faec3b695451b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2569ddf558f241684a15dd809f6a2349"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOutputDirect.html#a2569ddf558f241684a15dd809f6a2349">reportUnderrun</a> (void)</td></tr>
<tr class="memdesc:a2569ddf558f241684a15dd809f6a2349"><td class="mdescLeft">&#160;</td><td class="mdescRight">Report buffer underruns, but only once.  <a href="#a2569ddf558f241684a15dd809f6a2349">More...</a><br /></td></tr>
<tr class="separator:a2569ddf558f241684a15dd809f6a2349"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contains the connection to alsa, with a method to write directly to the PCM. </p>
<p>This is essentailly an adaptor for alsa's snd_pcm_t type, and hence inherits much of its behaviour.</p>
<p>A name, period size and rate are required to open the PCM. The sound data is assumed to contain a single channel, at a bit depth of 16.</p>
<p>Sound is written to the output by writeSamples method, which must be called periodically thereafter to create a continuous stream of sound to be played. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad44c1cd0c0ed4855aadafa551101e573"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OutputDirect::OutputDirect </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>pcmName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>periodSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>sampleRate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create new <a class="el" href="classOutputDirect.html" title="Contains the connection to alsa, with a method to write directly to the PCM. ">OutputDirect</a> and prepare it for incoming data. </p>
<p>This may fail if there is another application using the hardware.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pcmName</td><td>name of pcm to open (e.g. "hw:0") </td></tr>
    <tr><td class="paramname">periodSize</td><td>Size in samples of period data that will be written </td></tr>
    <tr><td class="paramname">sampleRate</td><td>Rate in hertz at which sound is sampled (Eg: 44100) </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classOutputDirect_1_1UnableToOpenPCMException.html" title="Thrown when pcm could not be opened. ">UnableToOpenPCMException</a></td><td>Thrown if PCM cannot be opened for some reason (E.g it is in use) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a2569ddf558f241684a15dd809f6a2349"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void OutputDirect::reportUnderrun </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Report buffer underruns, but only once. </p>
<p>The system won't ever recover from an underrun if it's spending extra CPU effort telling the user about them, so print the error message once when the first occurs, then keep quiet unless a non-underrunning write has succeeded. </p>

</div>
</div>
<a class="anchor" id="ac4d85fd02c2352113fe8ea24638c3e81"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void OutputDirect::writeSamples </td>
          <td>(</td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>buffer</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write some samples to the output. </p>
<p>Following the first write, this should be called periodically to create a continuous stream of sound to be played. Failure to do so may result in sound artifacts and an XRUN message will be printed to stderr. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Buffer containing the sample data</td></tr>
    <tr><td class="paramname">length</td><td>Number of samples in the buffer </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classOutputSink.html#aa4bd36b7af5db724ba3712b55dec5d98">OutputSink</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="OutputDirect_8h_source.html">OutputDirect.h</a></li>
<li>src/OutputDirect.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 5 2015 16:46:54 for SMRGygurdy by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>

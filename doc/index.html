<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>SMRGygurdy: SMRGyGurdy</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SMRGygurdy
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SMRGyGurdy </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>SMRGyGurdy is a music synthesiser that tries to emulate a medieval folk instrument called hurdy gurdy. It uses a MIDI keyboard and a foot pedal for input and generates sound output using the Artifastring synthesis library.</p>
<h1><a class="anchor" id="install"></a>
1. Installation</h1>
<h2><a class="anchor" id="prereq"></a>
1.1 Pre-requisites</h2>
<p>The following packages are required to build the source:</p>
<ul>
<li>python</li>
<li>swig</li>
<li>libasound</li>
<li>libconfig++</li>
<li>libartifastring <a href="https://github.com/gperciva/artifastring">https://github.com/gperciva/artifastring</a></li>
</ul>
<h2><a class="anchor" id="pedal"></a>
1.2 Installing a Foot Pedal driver</h2>
<p>SMRGyGurdy was intended to use a foot pedal to control the bow speed in the physical model.</p>
<p>Two hardware foot-pedals are supported: the <a class="el" href="classMiniLAB1008.html" title="Provides an interface for the minilab 1008 ADC. ">MiniLAB1008</a>, and the <a class="el" href="classComedi.html" title="Provides an interface for ADCs supported by the Linux Comedi kernel drivers The Analogue to Digital C...">Comedi</a> (Control and Measurement Interface: <a href="http://www.comedi.org/">http://www.comedi.org/</a>) for the diverse A/D/A products supported by the Linux kernel. The current version of the drivers were tested with the USB-DUX peripheral <a href="http://www.linux-usb-daq.co.uk/">http://www.linux-usb-daq.co.uk/</a></p>
<p>In all these cases, a pedal is required to operate a potential divider, supplying one of the A-D inputs of the peripheral device with a voltage varying typically between 0 and the analogue VRef.</p>
<h3><a class="anchor" id="minilab1008"></a>
1.2.1 The minilab1008.</h3>
<p>To install the driver for the minilab1008 ADC you need to have the following packages:</p>
<ul>
<li>udev</li>
<li>libusb-devel</li>
<li>libusb-static</li>
<li>libusb</li>
</ul>
<p>Once these packages are installed, follow the instructions in README located in MCCLIBHID.1.40.tgz to make and install libhid and the associated minilab1008 headers.</p>
<p>Finally connect the the PC +5V ADC supply to the IN1 socket of the pedal and CH0 IN to the OUT2 socket (and the associated GND connectors), with the supplied jack plugs.</p>
<p>Note that this software has been rewritten using a more recent libusb library and we welcome patches from user of these products.</p>
<h3><a class="anchor" id="Comedi"></a>
1.2.1 Comedi peripherals (e.g. the USB-DUX).</h3>
<p>The <a class="el" href="classComedi.html" title="Provides an interface for ADCs supported by the Linux Comedi kernel drivers The Analogue to Digital C...">Comedi</a> foot pedal makes use of a convenience library which is distributed under the BogIOLib project. This can be compiled and installed from the git repostiory at <a href="https://github.com/nickbailey/bogiolib">https://github.com/nickbailey/bogiolib</a></p>
<h2><a class="anchor" id="compile"></a>
1.3 Compile</h2>
<p>In order to compile the code, the GNU C++ compiler and GNU make are required.</p>
<p>I recommend building the program in a subdirectory (say, <code>build</code>)</p>
<div class="fragment"><div class="line">./autogen.sh</div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">../configure</div>
<div class="line">make</div>
</div><!-- fragment --><p>By default, <a class="el" href="classComedi.html" title="Provides an interface for ADCs supported by the Linux Comedi kernel drivers The Analogue to Digital C...">Comedi</a> support is compiled in and minilab1008 support is not. This can be changed by passing flags to the <code>configure</code> command, respectively <code>--without-comedi</code> and <code>--with-MiniLAB1008</code>. As usual, <code>--help</code> displays the full story.</p>
<h2><a class="anchor" id="run"></a>
1.4 Run</h2>
<p>Run the compiled program by typing</p>
<div class="fragment"><div class="line">./src/smrgurdy</div>
</div><!-- fragment --><h2><a class="anchor" id="config"></a>
1.5 Configuration</h2>
<p>SMRGyGurdy remembers its configuration files across runs, storing the configuration in <code>$HOME/.smrgygurdy</code>.</p>
<p>Either edit the config file to change the following options, or supply them all on the command line the first time the program is run. <code>smrgygurdy --help</code> shows how.</p>
<p>A typcal configuration file (copied direct from the maintainer's machine) looks like this:</p>
<div class="fragment"><div class="line">pcm = <span class="stringliteral">&quot;default&quot;</span>;</div>
<div class="line">pedal = <span class="stringliteral">&quot;modwheel&quot;</span>;</div>
<div class="line">buffer_size = 512;</div>
<div class="line">sample_rate = 44100;</div>
<div class="line">polyphony = 10;</div>
<div class="line">threads = 4;</div>
<div class="line">verbosity = 0;</div>
<div class="line">midi : </div>
<div class="line">{</div>
<div class="line">  controller_id = 129;</div>
<div class="line">  controller_port = 0;</div>
<div class="line">  temperament = 0;</div>
<div class="line">};</div>
<div class="line">model : </div>
<div class="line">{</div>
<div class="line">  output_gain = 1.5;</div>
<div class="line">  autofade_point = 0.2;</div>
<div class="line">  bow_speed_min = 0.4;</div>
<div class="line">  bow_speed_max = 1.5;</div>
<div class="line">};</div>
</div><!-- fragment --><p>The options are: </p><div class="fragment"><div class="line">--alsa-device=dev | -ddev:      Set audio output stream</div>
<div class="line">--pedal-device=<span class="keyword">class </span>| -Pclass: Set pedal device class</div>
<div class="line">        Supported classes: comedi; minilab1080</div>
<div class="line">                           modwheel (wheel on MIDI controller)</div>
<div class="line">                           dummy (fixed value 0.75)</div>
<div class="line">--buffer-size=size | -bsize:    Set audio buffer length to size</div>
<div class="line">--sample-rate=rate | -rrate:    Set audio sample rate in Hz</div>
<div class="line">--polyphony=voices | -pvoices:  Set max number of sounding voices</div>
<div class="line">--threads=thrds | -ttrhds:      Use thrds threads for synthesis</div>
<div class="line">--midi-id=id | -Mid:            Set midi controller to id</div>
<div class="line">--midi-port=port | -mport:      Set midi controller port</div>
<div class="line">--bow-speed-max=spd | -Sspd:    Set bow speed in m/s for full pedal</div>
<div class="line">--bow-speed-min=spd | -sspd:    Set bow speed for pedal fully up</div>
<div class="line">--output-gain=gain | -ggain:    Set output gain (floating point)</div>
<div class="line">--verbose[=level] | -v[level]:  Set verbosity</div>
<div class="line">        1 = report midi note on/off;</div>
<div class="line">        2 = also report changes of pedal value</div>
<div class="line">--list-midi | -l:               List midi input devices and exit</div>
<div class="line">--help | -h:                    Print usage and exit</div>
</div><!-- fragment --><p>You can find out the id and port of your keyboard by using aconnect</p>
<div class="fragment"><div class="line">aconnect -lio</div>
</div><!-- fragment --><p>or by running the program with the <code>-l</code> option.</p>
<h1><a class="anchor" id="background"></a>
2. Background</h1>
<p>SMRGyGurdy was written as a drone instrument for the MicrotonalISM project <a href="http://www.n-ism.org/Projects/microtonalism.php">http://www.n-ism.org/Projects/microtonalism.php</a></p>
<p>Before the scale was standardised with 12 Equal Divisions of the Octave, instruments playing with 19 (usually unequal) divisions were not uncommon. 19EDO is a tuning system which is isomorphic with the commonly used modern system; you can try it out using the javascript keyboard demonstration at <a href="http://www.n-ism.org/Projects/microtonalism.php">http://www.n-ism.org/Projects/microtonalism.php</a> (source code: <a href="http://www.n-ism.org/Software/using_clavier.php">http://www.n-ism.org/Software/using_clavier.php</a>). The musical consequences of adopting the system, along with a simple theoretical intruoduction to the tuning of the scale and performances of some short works written in it by Composer Graham Hair can be seen in the documentary film, "Making Music with 19 Tones" (see <a href="https://vimeo.com/80450876">https://vimeo.com/80450876</a>)</p>
<h2><a class="anchor" id="references"></a>
2.1 References</h2>
<ul>
<li>Artifastring library created by Graham Percival <a href="http://percival-music.ca/">http://percival-music.ca/</a></li>
<li>Application currently maintained by Nick Bailey <a href="http://www.n-ism.org/People/nick.php">http://www.n-ism.org/People/nick.php</a></li>
</ul>
<h2><a class="anchor" id="thx"></a>
2.3 Acknowledgements</h2>
<p>This project would not have been possible without the supervision of Dr Martin Macauley and Dr Nicholas Bailey, as well as guidance from Prof. Graham Hair and Graham Percival related to music theory.</p>
<p>It is currently maintained by Nick Bailey at the Science and Music Research Group, part of the School of Engineering at The University of Glasgow. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 5 2015 16:48:08 for SMRGygurdy by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
